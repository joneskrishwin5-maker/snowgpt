<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>SnowGPT</title>

<style>
:root{
  --bg:#050b16;
  --panel:#0b1628;
  --text:#e5e7eb;
  --neon:#38bdf8;
  --ai:#22c55e;
  --heading:#38bdf8;
  --you:#60a5fa;
}
.light{
  --bg:#f4f6fb;
  --panel:white;
  --text:#0f172a;
  --neon:#0284c7;
  --ai:#15803d;
  --heading:#0284c7;
  --you:#1d4ed8;
}

body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:Segoe UI,Arial;
}

/* LOGIN */
#login{
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
}
.login-box{
  background:var(--panel);
  padding:40px;
  border-radius:16px;
  width:360px;
  text-align:center;
  box-shadow:0 0 30px #38bdf855;
}
.login-box h2{color:var(--heading);}
.login-box input{
  width:100%;
  padding:12px;
  border-radius:10px;
  border:none;
  margin-top:15px;
  background:#020617;
  color:white;
}
.light .login-box input{
  background:#e5e7eb;
  color:#0f172a;
}

/* APP */
#chat{
  display:none;
  height:100vh;
}
.app{
  display:flex;
  height:100%;
}

/* Sidebar */
.sidebar{
  width:250px;
  background:#020617;
  padding:15px;
  overflow-y:auto;
}
.light .sidebar{
  background:#e5e7eb;
}
.sidebar h3{
  margin-top:0;
  color:var(--heading);
}
.history-item{
  background:#0b1628;
  padding:10px;
  margin-bottom:8px;
  border-radius:8px;
  cursor:pointer;
  color:white;
}
.light .history-item{
  background:white;
  color:#0f172a;
}

/* Main */
.main{
  flex:1;
  display:flex;
  flex-direction:column;
}

/* Topbar */
.topbar{
  background:linear-gradient(90deg,#020617,#0b1628);
  padding:15px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.light .topbar{
  background:#e5e7eb;
}
.logo{
  display:flex;
  align-items:center;
  gap:10px;
  font-size:20px;
  color:var(--heading);
}

/* Buttons */
.tools button{
  background:#020617;
  border:none;
  color:white;
  font-size:18px;
  padding:8px 12px;
  border-radius:8px;
}
.light .tools button{
  background:white;
  color:#0f172a;
}

/* Chat */
.chatbox{
  flex:1;
  padding:20px;
  overflow-y:auto;
}
.msg{margin-bottom:15px;}
.you{color:var(--you);}
.ai{color:var(--ai);}

/* Typing dots */
.dots::after{
  content:"";
  animation:dots 1.4s infinite;
  color:var(--ai);
}
@keyframes dots{
  0%{content:"";}
  25%{content:".";}
  50%{content:"..";}
  75%{content:"...";}
  100%{content:"";}
}

/* Input */
.inputbar{
  display:flex;
  padding:15px;
  background:var(--panel);
}
.inputbar input{
  flex:1;
  padding:12px;
  border-radius:10px;
  border:none;
  background:#020617;
  color:white;
}
.light .inputbar input{
  background:#e5e7eb;
  color:#0f172a;
}
.inputbar button{
  margin-left:10px;
  padding:12px 20px;
  border:none;
  border-radius:10px;
  background:var(--neon);
  color:white;
}
</style>
</head>

<body>

<div id="login">
  <div class="login-box">
    <h2>SnowGPT</h2>
    <input id="user" placeholder="Username">
    <input id="pass" type="password" placeholder="Password">
    <button onclick="loginUser()">Login</button>
    <p id="error" style="color:red"></p>
  </div>
</div>

<div id="chat">
  <div class="app">

    <div class="sidebar">
      <h3>History</h3>
      <div id="history"></div>
    </div>

    <div class="main">
      <div class="topbar">
        <div class="logo"><b>SnowGPT</b></div>
        <div class="tools">
          <button onclick="toggleTheme()">ðŸŒ™</button>
          <button onclick="clearChat()">ðŸ—‘</button>
        </div>
      </div>

      <div class="chatbox" id="chatbox"></div>

      <div class="inputbar">
        <input id="msg" placeholder="Ask SnowGPT...">
        <button onclick="send()">Send</button>
      </div>
    </div>

  </div>
</div>

<script>
const loginDiv=login;
const chatDiv=chat;
const chatbox=document.getElementById("chatbox");
const historyBox=document.getElementById("history");

function loginUser(){
  if(user.value==="admin" && pass.value==="jsf0119"){
    loginDiv.style.display="none";
    chatDiv.style.display="block";
  } else error.innerText="Wrong login";
}

function toggleTheme(){document.body.classList.toggle("light");}
function clearChat(){chatbox.innerHTML="";historyBox.innerHTML="";}

let typing=false;

function typeAI(text){
  typing=true;
  const el=document.createElement("div");
  el.className="msg ai";
  el.innerHTML="<b>SnowGPT:</b> ";
  chatbox.appendChild(el);

  let i=0;
  const timer=setInterval(()=>{
    el.innerHTML+=text.charAt(i++);
    chatbox.scrollTop=chatbox.scrollHeight;
    if(i>=text.length){clearInterval(timer);typing=false;}
  },14);
}

async function send(){
  if(typing) return;
  const m=msg.value;
  if(!m) return;

  chatbox.innerHTML+=`<div class="msg you">You: ${m}</div>`;
  historyBox.innerHTML+=`<div class="history-item">${m}</div>`;
  msg.value="";

  const dots=document.createElement("div");
  dots.className="msg ai dots";
  dots.innerHTML="<b>SnowGPT</b>";
  chatbox.appendChild(dots);

  const userInput = input.value;

const r = await fetch("https://snowgpt-backend.onrender.com/chat", {
  method: "POST",
  headers: {
    "Content-Type": "application/json"
  },
  body: JSON.stringify({
    username: "admin",
    password: "1234",
    message: userInput
  })
});

  const d=await r.json();
  dots.remove();
  const msg = document.createElement("div");
msg.className = "ai";
msg.innerText = d.reply;
chatbox.appendChild(msg);
  typeAI(d.reply);
}
</script>

</body>
</html>
